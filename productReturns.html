<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="application-name" content="Project #4 Final">
  <meta name="viewport" content="width-device-width, initial-scale=1.0">
  <link rel="stylesheet" href="styles.css">
  <link
          rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
          crossorigin="anonymous">
  <link
          rel="icon"
          type="image/x-icon"
          href="https://cdn-icons-png.flaticon.com/512/8068/8068184.png">
  <link
          rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <title>PRODUCT RETURNS | The One-stop Shop to All Kinds of 4's</title>
  <style>
    /* Darken search button on hover */
    .search-button {
      background-color: #d50104;
      color: white;
    }

    .search-button:hover {
      background-color: #a30003;
    }

    /* Remove blue outline when search input is focused */
    .form-control:focus {
      outline: none;
      box-shadow: none;
    }
    #cart-items {border: 1px solid #ccc; padding: 10px; margin-bottom: 20px;}
    .cart-item {display: flex; align-items: center; justify-content: space-between; margin-bottom: 10px;}
    .cart-item img {width: 50px; height: 50px; object-fit: fill; margin-right: 10px;}
    .cart-header, .cart-item {display: flex; align-items: center; justify-content: space-between;}
    .cart-header div, .cart-item div {flex: 1; text-align: center;}
    .cart-header {font-weight: bold; margin-bottom: 10px;}
    #cart-total {text-align: right;}
    #checkout-btn {background-color: #4CAF50; color: white; padding: 10px 20px; border: none; cursor: pointer;}
    #checkout-btn:hover {background-color: #45a049;}
    #json-output-container {border: 1px solid #ccc; padding: 10px; margin-top: 20px; white-space: pre-wrap;}
  </style>
</head>
<body>
<div class="container-fluid">
  <div class="row" id="header-row" style="background-color: #eae6e6">
    <div class="d-flex col-sm-1  justify-content-center align-items-center" id="home-icon">
      <a href="index.html" target="_self" style="padding: 5px;">
        <img src="https://cdn-icons-png.flaticon.com/512/8068/8068184.png" alt="Home Logo Icon" title="PROJECT #4 Logo"
             style="width: 60px; height: auto; transition: filter 0.3s ease;"
             onmouseover="this.style.filter='brightness(50%)'" onmouseout="this.style.filter='brightness(100%)'">
      </a>
    </div>
    <div class="d-flex col-sm-2  justify-content-center align-items-center" id="brand-name">
      <h2>PROJECT #4</h2>
    </div>
    <div class="d-flex col-sm-5  justify-content-center align-items-center" id="search-bar">
      <div class="input-group">
        <!-- Dropdown Button -->
        <button class="btn btn-secondary dropdown-toggle" id="categories-dropdown" data-bs-toggle="dropdown" aria-expanded="false"
                style="transition: background-color 0.3s ease; background-color: #d50104;"
                onmouseover="this.style.backgroundColor='#a30003'" onmouseout="this.style.backgroundColor='#d50104'">
          All
        </button>
        <ul class="dropdown-menu">
          <li><a class="dropdown-item" href="#">Option 1</a></li>
          <li><a class="dropdown-item" href="#">Option 2</a></li>
          <li><a class="dropdown-item" href="#">Option 3</a></li>
        </ul>

        <!-- Search Input -->
        <input type="text" class="form-control" placeholder="Search PROJECT #4" aria-label="Search PROJECT #4">

        <!-- Search Button with Icon -->
        <button class="btn search-button" type="button">
          <i class="fas fa-search"></i>
        </button>
      </div>
    </div>
    <div class="d-flex col-sm-1  justify-content-center align-items-center" id="sign-in-button">
      <div class="dropdown">
        <button class="btn btn-outline-danger dropdown-toggle" type="button" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-expanded="false" style="transition: background-color 0.3s ease; background-color: #d50104; color: white;"
                onmouseover="this.style.backgroundColor='#a30003'" onmouseout="this.style.backgroundColor='#d50104'" >
          Account
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton">
          <!-- Login and Sign Up Options -->
          <li><a class="dropdown-item" href="login.html">Login</a></li>
          <li><a class="dropdown-item" href="signUp.html">Sign Up</a></li>
        </ul>
      </div>
    </div>
    <div class="d-flex col-sm-1  justify-content-center align-items-center" id="placeholder">

    </div>
    <div class="d-flex col-sm-2  justify-content-center align-items-center" id="shopping-cart-button">
      <button class="btn btn-outline-danger" onclick="window.location.href='shoppingCart.html'" style="transition: background-color 0.3s ease; background-color: #d50104; color: white;"
              onmouseover="this.style.backgroundColor='#a30003'" onmouseout="this.style.backgroundColor='#d50104'" >
        <i class="fas fa-shopping-cart"></i> Go to Cart
      </button>
    </div>
  </div>
  <div class="row" id="nav-row">
    <ul class="nav nav-pills nav-fill">
      <li class="nav-item">
        <a class="nav-link" aria-current="page" href="index.html">Home</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="aboutUs.html">About Us</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="shoppingCart.html">Shopping Cart</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="products.html">Products</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="login.html">Login</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="signUp.html">Sign Up!</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="contactUs.html">Contact Us</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="productManagement.html">Product Management</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="billingInfo.html">Billing Info</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="shippingInfo.html">Shipping Info</a>
      </li>
      <li class="nav-item">
        <a class="nav-link active" href="productReturns.html">Product Returns</a>
      </li>
    </ul>
  </div>
  <div class="row" id="content-row" style="min-height: 76vh;">
    <div class="col-sm-2 border"></div>
    <div class="col-sm-8 border">
      <h3 class="text-center mt-4">Product Returns: </h3>
      <div id="cart-items" class="mt-4">
        <!-- Header Row for Cart Items -->
        <div class="cart-header">
          <div>Image</div>
          <div>Product ID</div>
          <div>Item Price</div>
          <div>Quantity</div>
          <div>Total Item Price</div>
          <div>Actions</div>
        </div>
      </div>
      <div id="cart-total" class="text-right mt-4">
        <h4>Return Total: $<span id="total-amount">0</span></h4>
        <button id="checkout-btn" class="btn btn-success">Confirm Return</button>
      </div>
      <div id="json-output-container"></div>
    </div>
    <div class="col-sm-2 border">
    </div>
  </div>
  <div class="row" style="background-color: #eae6e6" id="footer-row">
    <footer class="d-flex justify-content-center align-items-center">
      <a href="termsOfUse.html">Terms of Use</a>
      <a href="cookiePrivacyPolicy.html">Cookie & Privacy Policy</a>
      <a href="copyRight.html">Copyright</a>
    </footer>
  </div>
</div>
</div>

<script
        src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"
        integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy"
        crossorigin="anonymous">
</script>
<script
        src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous">
</script>
<script>
  const products = [
    { productId: "001", productName: "A Pink #4", productPrice: 400.99, image: "https://static.vecteezy.com/system/resources/previews/024/683/991/non_2x/pink-3d-number-4-free-png.png" },
    { productId: "002", productName: "A Red #4", productPrice: 20.99, image: "https://atlas-content-cdn.pixelsquid.com/stock-images/number-4-Vay92K1-600.jpg" }
  ];

  function addToCart(product) {
    const cartItems = document.getElementById("cart-items");
    const cartItem = document.createElement("div");
    cartItem.classList.add("cart-item");

    const productImgDiv = document.createElement("div");
    const productImg = document.createElement("img");
    productImg.src = product.image;
    productImg.alt = product.productName;
    productImgDiv.appendChild(productImg);

    const productIdDiv = document.createElement("div");
    productIdDiv.textContent = product.productId;

    const productPriceDiv = document.createElement("div");
    productPriceDiv.textContent = "$" + product.productPrice.toFixed(2);

    const quantityDiv = document.createElement("div");
    const quantity = document.createElement("input");
    quantity.type = "number";
    quantity.value = 1;
    quantity.addEventListener("input", () => {
      calculateTotal();
      updateTotal();
    });
    quantityDiv.appendChild(quantity);

    const productTotalDiv = document.createElement("div");
    const calculateTotal = () => {
      const qty = parseInt(quantity.value) || 1;
      productTotalDiv.textContent = "$" + (qty * product.productPrice).toFixed(2);
    };
    calculateTotal();

    const actionsDiv = document.createElement("div");
    const removeBtn = document.createElement("button");
    removeBtn.textContent = "Remove";
    removeBtn.classList.add("btn", "btn-danger");
    removeBtn.onclick = () => {
      cartItem.remove();
      updateTotal();
    };
    actionsDiv.appendChild(removeBtn);

    cartItem.append(productImgDiv, productIdDiv, productPriceDiv, quantityDiv, productTotalDiv, actionsDiv);
    cartItems.appendChild(cartItem);
  }

  function updateTotal() {
    const totals = Array.from(document.querySelectorAll('.cart-item div:nth-last-child(2)')).map(el => parseFloat(el.textContent.slice(1)));
    document.getElementById("total-amount").textContent = totals.reduce((acc, val) => acc + val, 0).toFixed(2);
  }

  function generateCartJSON() {
    const items = Array.from(document.getElementsByClassName("cart-item")).map(cartItem => {
      const id = cartItem.querySelector("div:nth-child(2)").textContent;
      const price = cartItem.querySelector("div:nth-child(3)").textContent.slice(1);
      const qty = cartItem.querySelector("input").value;
      const total = cartItem.querySelector("div:nth-last-child(2)").textContent.slice(1);
      return `{ "productId": "${id}", "price": "${price}", "quantity": ${qty}, "total": "${total}" }`;
    });
    const jsonString = `[ ${items.join(', ')} ]`;
    document.getElementById("json-output-container").textContent = jsonString;
  }

  document.getElementById("checkout-btn").addEventListener("click", function(event){
    generateCartJSON()
    window.location.href = "shippingInfo.html"
  });
  products.forEach(addToCart);
  updateTotal();

</script>

</body>
</html>
